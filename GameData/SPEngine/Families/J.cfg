SPEFamily:NEEDS[RealFuels]
{
	letter = J
	description = Large hydrolox vacuum engine, like J-2.
	usesPartUpgrades = True
	minTf = 0.2
	TechLevel
	{
		// J-2-200klbf = 140000, HydroloxPumps, Navaho-TP
		puRequired = SPEngineTech-J0
		maxThrust = 1000
		minThrottle = 0.76
		isp
		{
			key = 0 424
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.7454
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.2546
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.500
		}
		maxIgnitions = 2
		mass = 1.77
		cost = 1950 // yields 1694 for a J-2-200klbf
		toolCost = 23000 // yields 19980.2 for a J-2-200klbf
	}
	TechLevel
	{
		// J-2 = 30000, J-2-200klbf
		puRequired = SPEngineTech-J1
		maxThrust = 1150
		minThrottle = 0.76
		isp
		{
			key = 0 424
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.7454
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.2546
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.500
		}
		maxIgnitions = 3
		mass = 1.734
		cost = 2300 // yields 1998 for an upgraded J-2-200klbf
		toolCost = 30000 // yields 10077 to upgrade from a J-2-200klbf
	}
	TechLevel
	{
		// J-2S = 80000, J-2
		puRequired = SPEngineTech-J2
		maxThrust = 1280
		minThrottle = 0.76
		isp
		{
			key = 0 436
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.7454
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.2546
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.500
		}
		maxIgnitions = 3
		mass = 1.688
		cost = 1725 // yields 1498.5 for an upgraded J-2-200klbf
		toolCost = 47000 // yields 19980.2 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// J-2T-200K = 0; toroidalAerospike = 66000
		puRequired = SPEngineTech-J3
		maxThrust = 1000
		minThrottle = 0.1325
		isp
		{
			key = 0 435
			key = 1 300
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 2.000
		}
		maxIgnitions = 3
		mass = 1.538
		cost = 1900 // yields 1650 for an upgraded J-2-200klbf
		toolCost = 67500 // yields 25974.3 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// J-2T-250K = 30000
		puRequired = SPEngineTech-J4
		maxThrust = 1250
		minThrottle = 1.0 // No throttling capability.  I was surprised, but that's what the RO config says.
		isp
		{
			key = 0 441
			key = 1 290
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 2.000
		}
		maxIgnitions = 3
		mass = 1.538
		cost = 1900 // yields 1650 for an upgraded J-2-200klbf
		toolCost = 67800 // yields 11988.1 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// J-2X = 0; SSTU-SC-ENG-J-2X = 158860
		puRequired = SPEngineTech-J5
		maxThrust = 1470
		minThrottle = 0.82
		isp
		{
			key = 0 448
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.500
		}
		maxIgnitions = 8
		mass = 2.713
		cost = 3810 // yields 3309.8 for an upgraded J-2-200klbf
		toolCost = 99000 // yields 38883.3 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// Hypothetical next-generation engine.
		puRequired = SPEngineTech-J6
		maxThrust = 1500
		minThrottle = 0.76
		isp
		{
			key = 0 451
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.500
		}
		maxIgnitions = 8
		mass = 2.2
		cost = 3450 // yields 2997 for an upgraded J-2-200klbf
		toolCost = 125000 // yields 39786.7 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// Hypothetical post-2050 engine
		puRequired = SPEngineTech-J7
		maxThrust = 1800
		minThrottle = 0.74
		isp
		{
			key = 0 453
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.250
		}
		maxIgnitions = 10
		mass = 1.8 // exciting new materials techs, no doubt
		cost = 3175 // yields 2758.1 for an upgraded J-2-200klbf
		toolCost = 216000 // yields 100769.8 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// Hypothetical post-2100 engine
		puRequired = SPEngineTech-J8
		maxThrust = 2000
		minThrottle = 0.74
		isp
		{
			key = 0 456
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.250
		}
		maxIgnitions = 10
		mass = 1.8
		cost = 2750 // yields 2388.9 for an upgraded J-2-200klbf
		toolCost = 400000 // yields 197369.9 to continue upgrading from J-2-200klbf
	}
	TechLevel
	{
		// Hypothetical post-2150 engine
		puRequired = SPEngineTech-J9
		maxThrust = 2500
		minThrottle = 0.6
		isp
		{
			key = 0 460
			key = 1 200
		}
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 0.745
			DrawGauge = true
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.255
		}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.250
		}
		maxIgnitions = 10
		mass = 1.8
		cost = 2750 // yields 2388.9 for an upgraded J-2-200klbf
		toolCost = 550000 // yields 199802.3 to continue upgrading from J-2-200klbf
	}
}

PARTUPGRADE
{
	name = SPEngineTech-J0
	techRequired = improvedHydrolox
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine family
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = Unlocks the J-class Procedural Engine family at techlevel 1.\n\nResembling the Rocketdyne J-2, these large hydrolox engines deliver up to a meganewton of thrust at 424s Isp for almost 6 minutes, and support up to two ignitions.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J1
	techRequired = largeHydrolox
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL2
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 2 for increased performance.\n\nResembling later J-2 models, these engines deliver 15% more thrust and an almost 8-minute burntime with greatly improved reliability and a third ignition.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J2
	techRequired = hydrolox1972
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL3
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 3 for increased performance.\n\nResembling the J-2S, these engines offer increased thrust and specific impulse.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J3
	techRequired = hydrolox1976
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL4
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 4 for increased performance.\n\nResembling the J-2T, these toroidal aerospike engines deliver much improved sea-level Isp, though not quite as high as the H-class.  Rated burntime is 9 minutes.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J4
	techRequired = hydrolox1981
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL5
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 5 for increased performance.\n\nResembling proposed J-2T upgrades incorporating J-2S turbomachinery, these aerospike engines offer 25% more thrust than TL4, though the increased expansion ratio does slightly knock sea-level Isp.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J5
	techRequired = hydrolox2009
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL6
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 6 for increased performance.\n\nResembling the proposed J-2X, these engines increase thrust and Isp over TL3 and are rated for burntimes of 10 minutes.  They can ignite up to 8 times.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J6
	techRequired = hydroloxNF
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL7
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 7 for increased performance.\n\nThese speculative next-generation hydrolox engines offer minor improvements to thrust, Isp and reliability.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J7
	techRequired = colonization2051Hydrolox
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL8
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 8 for increased performance.\n\nThese speculative post-2050 hydrolox engines offer 20% more thrust and impressive reliability for up to 12 minute burntimes and up to 10 ignitions.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J8
	techRequired = colonization2100Hydrolox
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL9
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 9 for increased performance.
	partIcon = ROE-UpgradeIcon-Coatl
}

PARTUPGRADE
{
	name = SPEngineTech-J9
	techRequired = colonization2150Hydrolox
	entryCost = 0
	cost = 0
	title = J-class Procedural Engine upgrade: TL10
	basicInfo = Engine Performance Upgrade
	manufacturer = Engine Upgrade
	description = The J-class Procedural Engine family now supports techlevel 10 for increased performance.	partIcon = ROE-UpgradeIcon-Coatl
}

@ENTRYCOSTMODS:AFTER[RP-0]
{
	SPEngineTech-J0 = 120000,HydroloxPumps,Navaho-TP
	SPEngineTech-J1 = SPEngineTech-J0,20000
	SPEngineTech-J2 = SPEngineTech-J1,60000
	SPEngineTech-J3 = SPEngineTech-J2,40000
	SPEngineTech-J4 = SPEngineTech-J3,18000
	SPEngineTech-J5 = SPEngineTech-J4,120000
	SPEngineTech-J6 = SPEngineTech-J5,160000
	SPEngineTech-J7 = SPEngineTech-J6,300000
	SPEngineTech-J8 = SPEngineTech-J7,550000
	SPEngineTech-J9 = SPEngineTech-J8,600000
}

@PART[*]:HAS[@MODULE[ModuleSPEngine]:HAS[#familyLetter[J]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
	!TESTFLIGHT,*{}
	TESTFLIGHT
	{
		name = SPEngine-J-0 // based on J-2-200klbf
		ratedBurnTime = 350
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.902
		ignitionReliabilityEnd = 0.962
		cycleReliabilityStart = 0.902
		cycleReliabilityEnd = 0.962
	}
	TESTFLIGHT
	{
		name = SPEngine-J-1 // based on J-2
		ratedBurnTime = 475
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.9347
		ignitionReliabilityEnd = 0.9947
		cycleReliabilityStart = 0.8879
		cycleReliabilityEnd = 0.9995
		techTransfer = SPEngine-J-0:50&J-2-200K:25
	}
	TESTFLIGHT
	{
		name = SPEngine-J-2 // based on J-2S
		ratedBurnTime = 500
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.9434
		ignitionReliabilityEnd = 0.9995
		cycleReliabilityStart = 0.948
		cycleReliabilityEnd = 0.9995
		techTransfer = SPEngine-J-1,SPEngine-J-0:50&J-2-225K,J-2-200K:25
	}
	// The rest are all made-up numbers, because RO doesn't have any TF configs for J-2T or J-2X :(
	TESTFLIGHT
	{
		name = SPEngine-J-3 // J-2T-200K
		ratedBurnTime = 540 // Aerospikes are likely to be doing crazy things like SSTO that make for very long burns.
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.95 // not much work done on ignition because it's gonna be ground-lit anyway.  (If not, why are you using an aerospike?)
		ignitionReliabilityEnd = 0.9995
		cycleReliabilityStart = 0.96
		cycleReliabilityEnd = 0.9995
		// Based on the J-2S "machinery", so older J-2s aren't really relevant I guess?
		techTransfer = SPEngine-J-2:50&J-2S:25
	}
	TESTFLIGHT
	{
		name = SPEngine-J-4 // J-2T-250K
		ratedBurnTime = 540
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.96
		ignitionReliabilityEnd = 0.9995
		cycleReliabilityStart = 0.96
		cycleReliabilityEnd = 0.9995
		techTransfer = SPEngine-J-3,SPEngine-J-2:50&J-2S:15
	}
	TESTFLIGHT
	{
		name = SPEngine-J-5 // J-2X
		ratedBurnTime = 600
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.97
		ignitionReliabilityEnd = 0.9996
		cycleReliabilityStart = 0.97
		cycleReliabilityEnd = 0.9996
		// The aerospike stuff isn't really all that relevant to testing, here, so we care mainly about the J-2S data
		techTransfer = SPEngine-J-4,SPEngine-J-3:10&SPEngine-J-2:40&J-2S:20
	}
	TESTFLIGHT
	{
		name = SPEngine-J-6 // NF
		ratedBurnTime = 600
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.97
		ignitionReliabilityEnd = 0.99975
		cycleReliabilityStart = 0.97
		cycleReliabilityEnd = 0.99975
		techTransfer = SPEngine-J-5:50&J-2X:25
	}
	TESTFLIGHT
	{
		name = SPEngine-J-7 // 2050
		ratedBurnTime = 720
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.98
		ignitionReliabilityEnd = 0.9998
		cycleReliabilityStart = 0.98
		cycleReliabilityEnd = 0.9998
		techTransfer = SPEngine-J-6,SPEngine-J-5:50&J-2X:20
	}
	TESTFLIGHT
	{
		name = SPEngine-J-8 // 2100
		ratedBurnTime = 900
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.98
		ignitionReliabilityEnd = 0.99986
		cycleReliabilityStart = 0.98
		cycleReliabilityEnd = 0.99986
		techTransfer = SPEngine-J-7,SPEngine-J-6:50
	}
	TESTFLIGHT
	{
		name = SPEngine-J-9 // 2150
		ratedBurnTime = 960
		// assume roughly exponential relationship between chamber pressure and lifespan
		thrustModifier
		{
			key = 0.00 0.05 0 0
			key = 1.00 1.00 3 3
		}
		ignitionReliabilityStart = 0.99
		ignitionReliabilityEnd = 0.9999
		cycleReliabilityStart = 0.99
		cycleReliabilityEnd = 0.9999
		techTransfer = SPEngine-J-8,SPEngine-J-7,SPEngine-J-6:50
	}
}
